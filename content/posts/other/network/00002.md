---
title: ネットワーク基礎
date: 2018-11-07T09:30:00+09:00
showDate: true
tags: ["network"]
---

---

# Macアドレス
- ネットワーク部品に割り当てられたアドレス
- 48ビットのアドレス
- 先頭24ビットは、部品メーカーの識別番号
- 後半24ビットは、TODO
- 16進数表記
- OSIの第2層のデータリンク層

---

# OSI
## OSI参照モデル
### レイヤー7:アプリケーション層
- アプリケーションに特化したプロトコルを規定
- HTTP
- メール送信のSMTP

### レイヤー6:プレゼンテーション層
- データの表現形式を規定
- データ保存形式、圧縮、文字コード

### レイヤー5:セッション層
- コネクション確立、データ転送のタイミングを規定

### レイヤー4:トランスポート層
- データ転送の制御を規定
- TCP/IP

### レイヤー3:ネットワーク層
- IPアドレス
- 異なるネットワークへデータを転送するルーティングの制御
- ルーター、レイヤー3スイッチ
- パケットをどこからどこに転送するかの情報＝ルーティングテーブルを管理

### レイヤー2:データリンク層
- MACアドレスによるデータ転送
- 同じネットワーク内（同一セグメント内）にあるノード間の通信を規定する
- レイヤー2スイッチ
- 通信したいノードがどのポートに繋がっているかをMACアドレスによって判断してパケットを転送している

### レイヤー1:物理層
- ケーブルやコネクタの形状を規定
- 100BASE-T(イーサネット)

## ファイヤーウォール
### パケットフィルタ
- IPアドレス、ポート番号を元にフィルタリング
  - 80(http), 443(https)のみパケットの通過を許可
- パケットフィルタリングのルールのことをACL

### アプリケーションゲートウェイ
- プロキシのこと

---

# Linux基礎
## Linux
- メモリ上に展開してプログラムをプロセス（PID）
- ハードディスに割り当てる仮想メモリのことをスワップ

### FHS（ディレクトリ構成）
- /bin
  - 基本コマンドを格納したディレクトリ
- /boot
  - OS起動に必要なファイルを格納したディレクトリ、vmlinuzがLinuxカーネルの正体
- /dev
  - デバイスを格納したディレクトリ、dev/nullは、何もないを表す
- /etc
  - OSやアプリケーションの設定ファイルを格納したディレクトリ、Webサーバを起動するHttpデーモンの設定など
- /home
  - ユーザを格納したディレクトリ
- /proc
  - カーネルやプロセス情報を格納したディレクトリ
- /sbin
  - システム管理用コマンドを格納したディレクトリ、reboot,mount、usr/sibn、usr/local/sbinにも配置される
- /tmp
  - 一時ファイルを格納したディレクトリ
- /usr
  - アプリケーションを格納したディレクトリ
- /var
  - ログとかを格納したディレクトリ

---

# ドメイン
## ドメイン名
- インターネット上のネットワークを一意に識別するための名称  
  ex.) 違うマンションなのに住所が一緒だと困る
- http://www. **hoge.co.jp**  // 太字部分が該当

## ホスト名
- インターネット上のネットワークのホストを一意に識別するための名称  
  ex.） 同じマンションで部屋番号が一緒だと困る
- http:// **www** .hoge.co.jp // 太字部分が該当

## FQDN(Fully Qualified Domain Name)=完全修飾ドメイン名
- ドメイン名とホスト名を繋げた文字列のこと
- http:// **www.hoge.co.jp** // 太字部分が該当

---

# DNS
- Domain Name System
- ドメイン名をIPアドレスに変換するシステム

## DNSレコード
### Aレコード
- Adress Record
- ドメインをIPアドレスに置き換えるレコード
- 例）`hoge.com. IN A 192.168.0.1`

### MXレコード
- Mail Exchange
- メールサーバのホスト名を記載するレコード
- ドメインに紐づいたメールを使用する場合には不可欠
- 例）`hoge.com. IN MX 10 mail.hoge.com`
  - 数字の10は優先度を意味している
  - 1つ目は10、2つ目は20、３つ目は....
  - 10ずつ増やしているのは、間に余裕を持たせているため!?
  - `XX@hoge.com`というメールアドレスは、`mail.hoge.com`が処理(配送)する

### CNAMEレコード
- Canonical NAME
- ドメインを別のドメインに置き換えるレコード
- 特定のドメインを別のドメインに転送する場合に使用する
- 例）`www`有り無しの場合で同じIPアドレスにアクセスする場合
```
hoge.com. IN A 192.168.0.1
www.hoge.com. IN CNAME hoge.com.
```

### TXTレコード
- TEXT

## DNSラウンドロビン
- ドメイン名とIPアドレスを 1:n で対応付けること
- hoge.co.jp = 192.168.1.1, 192.168.1.2, 192.168.1.3
- ドメインへのアクセス時には、n のサーバへ負荷分散される
- RFC3484

---

# IP アドレス
（参考）
- https://qiita.com/mogulla3/items/efb4c9328d82d24d98e6

## グローバルIPアドレス
- 世界的には、ICANNが管理、日本では、JPNICが管理

## プライベートIPアドレス
- グローバルIPアドレスに変換せずにネットワーク接続を試みた場合、ルーター側でパケットの破棄が行われ、接続できない事象になる。

| CLASS | RANGE |
|---|---|
| クラスA | 10.0.0.0 ～ 10.255.255.255 |
| クラスB | 172.16.0.0 ～ 172.31.255.255 |
| クラスC | 192.168.0.0 ～ 192.168.255.255 |
