---
title: Scala
date: 2019-02-25T12:30:00+09:00
showDate: true
tags: ["Scala"]
---

# Scala型パラメータ
## はじめに
- クラス、インタフェース定義時に何の型が入るか決まっていないがインスタンス化する際に型を決定すること

例） クラス定義時に何の型が入るか不明であるため、型引数としてTを定義
```
class Glass[T](var content: T) {
  def put(t: T): Unit = { content = t }
  def get: T = content
}
```

型を定義する
```
class Drink
class Juice extends Drink
class Water extends Drink
```

インスタンス化するときに、型を決定する
```
val waterGlass = new Glass[Water](new Water)
val juiceGlass = new Glass[Juice](new Juice)
```

## サブタイプ
- スーパークラスにサブクラスのインスタンスをバインドできる機能のこと

例）
```
val drink: Drink = new Juice
```

## 非変
- 型パラメータ`Glass[T]`は、デフォルトの状態では、サブタイプの関係が存在しない
- つまり`Water`が`Drink`のサブタイプであっても、`Glass[Water]`型を`Glass[Drink]`型にバインドできない

```
// コンパイルエラー
val glassDrink: Glass[Drink] = new Glass[Water](new Water)
```

これを非変といい、Scalaではデフォルト

## 共変
- 型パラメータで定義したクラスにもサブタイプの関係を利用したい場合もある
- その場合共変[+T]することで、サブタイプの関係を型パラメータで定義したクラスに使うことができる

```
class Glass[+T](var content: T) {
  def put(t: T): Unit = { content = t }
  def get: T = content
}
```

```
val glassDrink: Glass[Drink] = new Glass[Water](new Water)
```

## 反変
- 共変の逆

```
val glassDrink: Glass[Water] = new Glass[Drink](new Drink)
```

